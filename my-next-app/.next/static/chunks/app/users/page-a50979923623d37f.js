(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9],{347:()=>{},2069:(e,s,a)=>{"use strict";a.d(s,{default:()=>m});var r=a(5155),t=a(3464),n=a(6874),c=a.n(n),l=a(2115),i=a(902),d=a(9300),o=a.n(d),h=a(7390);let x=l.forwardRef((e,s)=>{let{bsPrefix:a,className:t,striped:n,bordered:c,borderless:l,hover:i,size:d,variant:x,responsive:u,...j}=e,m=(0,h.oU)(a,"table"),p=o()(t,m,x&&"".concat(m,"-").concat(x),d&&"".concat(m,"-").concat(d),n&&"".concat(m,"-").concat("string"==typeof n?"striped-".concat(n):"striped"),c&&"".concat(m,"-bordered"),l&&"".concat(m,"-borderless"),i&&"".concat(m,"-hover")),v=(0,r.jsx)("table",{...j,className:p,ref:s});if(u){let e="".concat(m,"-responsive");return"string"==typeof u&&(e="".concat(e,"-").concat(u)),(0,r.jsx)("div",{className:e,children:v})}return v});var u=a(5695),j=a(5596);let m=()=>{let{setpages:e,setsearchTerm:s}=(0,l.useContext)(j.pagecontext),a=(0,u.useSearchParams)(),n=(0,u.useRouter)(),d=a.get("search")||"",o=parseInt(a.get("page"))||1,[h,m]=(0,l.useState)([]),[p,v]=(0,l.useState)(1),[g,f]=(0,l.useState)(""),[A,b]=(0,l.useState)(""),[N,k]=(0,l.useState)("createdAt"),[y,C]=(0,l.useState)("desc");(0,l.useEffect)(()=>{e(o),s(d),S()},[d,o,g,A,N,y,S,e,s]);let S=(0,l.useCallback)(async()=>{try{let e=localStorage.getItem("token"),s=await t.A.get("https://mern-test-project-5.onrender.com/users",{headers:{Authorization:"Bearer ".concat(e)},params:{search:d,role:g,age:A,sortBy:N,order:y,page:o,limit:5}});m(s.data.users),v(s.data.totalPages)}catch(s){var e;console.error("Error fetching users",(null===(e=s.response)||void 0===e?void 0:e.data)||s.message)}},[d,g,A,N,y,o]),_=async e=>{try{let s=localStorage.getItem("token");await t.A.delete("https://mern-test-project-5.onrender.com/users/".concat(e),{headers:{Authorization:"Bearer ".concat(s)}}),S()}catch(e){var s;console.error("Delete failed",(null===(s=e.response)||void 0===s?void 0:s.data)||e.message)}},U=e=>{n.push("/users?search=".concat(d,"&page=").concat(e))};return(0,r.jsxs)("div",{className:"container mt-4",children:[(0,r.jsx)("h3",{children:"User Listing Table"}),(0,r.jsx)("input",{type:"text",placeholder:"Search by name...",onChange:e=>{let a=e.target.value;s(a),n.push("/users?search=".concat(a,"&page=1"))},className:"form-control mb-3"}),(0,r.jsxs)("div",{className:"mb-3 d-flex gap-2 align-items-center",children:[(0,r.jsxs)("select",{value:g,onChange:e=>f(e.target.value),className:"form-select",children:[(0,r.jsx)("option",{value:"",children:"All Roles"}),(0,r.jsx)("option",{value:"admin",children:"Admin"}),(0,r.jsx)("option",{value:"user",children:"User"})]}),(0,r.jsxs)("select",{value:A,onChange:e=>b(e.target.value),className:"form-select",children:[(0,r.jsx)("option",{value:"",children:"Filter By Age"}),(0,r.jsx)("option",{value:"24",children:"24"}),(0,r.jsx)("option",{value:"26",children:"26"}),(0,r.jsx)("option",{value:"27",children:"27"})]}),(0,r.jsxs)("select",{value:y,onChange:e=>C(e.target.value),className:"form-select",children:[(0,r.jsx)("option",{value:"desc",children:"Desc"}),(0,r.jsx)("option",{value:"asc",children:"Asc"})]}),(0,r.jsx)(c(),{href:"/createuser",children:(0,r.jsx)(i.A,{variant:"info",size:"sm",children:"Create User Here"})})]}),(0,r.jsxs)(x,{striped:!0,bordered:!0,hover:!0,responsive:!0,children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Name"}),(0,r.jsx)("th",{children:"Age"}),(0,r.jsx)("th",{children:"Email"}),(0,r.jsx)("th",{children:"Actions"})]})}),(0,r.jsx)("tbody",{children:h.length>0?h.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:e.name}),(0,r.jsx)("td",{children:e.age}),(0,r.jsx)("td",{children:e.email}),(0,r.jsxs)("td",{children:[(0,r.jsx)(c(),{href:"/users/".concat(e._id),children:(0,r.jsx)(i.A,{variant:"primary",size:"sm",children:"View"})})," ",(0,r.jsx)(c(),{href:"/updateuser/".concat(e._id),children:(0,r.jsx)(i.A,{variant:"success",size:"sm",children:"Edit"})})," ",(0,r.jsx)(i.A,{variant:"danger",size:"sm",onClick:()=>_(e._id),children:"Delete"})]})]},e._id)):(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"4",className:"text-center",children:"No users found"})})})]}),(0,r.jsxs)("div",{className:"d-flex justify-content-center gap-3 mt-3",children:[(0,r.jsx)(i.A,{variant:"primary",onClick:()=>U(o-1),disabled:1===o,children:"Prev"}),(0,r.jsxs)("span",{className:"align-self-center",children:["Page ",o," of ",p]}),(0,r.jsx)(i.A,{variant:"primary",onClick:()=>U(o+1),disabled:o===p,children:"Next"})]})]})}},4004:(e,s,a)=>{Promise.resolve().then(a.bind(a,2069))},5596:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>v,pagecontext:()=>p});var r=a(5155),t=a(2115),n=a(5613),c=a.n(n),l=a(9588),i=a.n(l);a(347),a(5685);var d=a(6874),o=a.n(d),h=a(2865),x=a(2809),u=a(1728),j=a(902);let m=()=>(0,r.jsx)(h.A,{bg:"primary",variant:"dark",expand:"lg",className:"shadow-lg",children:(0,r.jsxs)(x.A,{children:[(0,r.jsx)(h.A.Brand,{as:o(),href:"/",children:"User Management"}),(0,r.jsx)(h.A.Toggle,{"aria-controls":"navbar-nav"}),(0,r.jsx)(h.A.Collapse,{id:"navbar-nav",children:(0,r.jsxs)(u.A,{className:"ms-auto",children:[(0,r.jsx)(u.A.Link,{as:o(),href:"/",children:"Home"}),(0,r.jsx)(u.A.Link,{as:o(),href:"/users",children:"Users"}),(0,r.jsx)(u.A.Link,{as:o(),href:"/createuser",children:"Create User"}),(0,r.jsx)(u.A.Link,{as:o(),href:"/updateuser",children:"Update User"}),(0,r.jsx)(u.A.Link,{as:o(),href:"/login",children:(0,r.jsx)(j.A,{variant:"light",className:"text-dark px-3 py-1",children:"Login"})})]})})]})}),p=(0,t.createContext)();function v(e){let{children:s}=e,[a,n]=(0,t.useState)(),[l,d]=(0,t.useState)("");return(0,r.jsx)("html",{lang:"en",children:(0,r.jsx)(p.Provider,{value:{pages:a,setpages:n,searchTerm:l,setsearchTerm:d},children:(0,r.jsxs)("body",{className:"".concat(c().variable," ").concat(i().variable," antialiased"),children:[(0,r.jsx)(m,{}),s]})})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[280,740,794,939,349,441,684,358],()=>s(4004)),_N_E=e.O()}]);